# 개선 제안 보고서: Mod Translator

> **문서 버전**: 1.1.0
> **작성일**: 2025년 12월 1일
> **최근 업데이트**: v0.1.1 릴리즈 후 재평가
> **작성자**: AI Assistant

## 1. 전체 개선 현황 요약

<!-- AUTO-SUMMARY-START -->
### 현황 개요

v0.1.1 릴리즈 후 재평가 결과, 총 **5개**의 미적용 개선 항목이 식별되었습니다.

| 우선순위 | 전체 항목 수 | 기능 개선 | 기능 추가 |
|:---|:---:|:---:|:---:|
| 🔴 **P1 (Critical)** | 1 | 1 | 0 |
| 🟡 **P2 (Important)** | 3 | 2 | 1 |
| 🟢 **P3 (Nice-to-have)** | 1 | 0 | 1 |
| **합계** | **5** | **3** | **2** |

### 항목별 분포 테이블

| # | 항목명 | 우선순위 | 카테고리 |
|:---:|:---|:---:|:---|
| 1 | API 키 저장소 보안 강화 (Stronghold) | P1 | 🔒 보안 |
| 2 | E2E 테스트 스위트 추가 | P2 | 🧪 테스트 |
| 3 | UI 에러 피드백 상세화 | P2 | 🎨 UI/UX |
| 4 | 번역 제외(ignore) 기능 | P2 | ✨ 기능 추가 |
| 5 | 다국어 UI 지원 (i18n) | P3 | ✨ 기능 추가 |

### 우선순위별 요약

- **P1 (1개)**: API 키를 OS 보안 저장소(Stronghold)로 마이그레이션하여 보안 강화
- **P2 (3개)**: E2E 테스트, UI 에러 메시지 개선, 번역 제외 패턴 기능
- **P3 (1개)**: 다국어 UI 지원으로 글로벌 사용자 접근성 향상

### ✅ 이전 보고서 대비 해결된 항목

다음 항목들은 v0.1.1에서 해결되어 본 보고서에서 **제외**되었습니다:
- ~~테스트 실패 14건~~ → 186개 테스트 모두 통과
- ~~CSP 정책 비활성화~~ → 활성화 및 API 화이트리스트 적용
- ~~Dead Code 경고~~ → 모든 경고 해결
- ~~톤 & 매너 분석~~ → `tone_analyzer.rs` 이미 구현됨
- ~~Stardew Valley 프로필~~ → `profiles/stardew.rs` 이미 구현됨
<!-- AUTO-SUMMARY-END -->

---

## 2. 🔧 기능 개선 항목 (기존 기능 개선)

<!-- AUTO-IMPROVEMENT-LIST-START -->

### 🔴 치명적 (P1)

#### [P1-1] API 키 저장소 보안 강화 (Tauri Stronghold)

| 항목 | 내용 |
|:---|:---|
| **ID** | `SEC-001` |
| **카테고리** | 🔒 보안 |
| **복잡도** | Medium |
| **대상 파일** | `apps/desktop/src/storage/apiKeyStorage.ts`, `apps/desktop/src-tauri/Cargo.toml`, `apps/desktop/src-tauri/src/lib.rs` |

**현재 상태:** API 키가 브라우저의 `localStorage`에 일반 텍스트로 저장됩니다. CSP 정책으로 외부 접근은 차단되지만, 로컬 파일 시스템에서 데이터 추출이 가능합니다.

**개선 내용:** `tauri-plugin-stronghold`를 도입하여 API 키를 OS 수준 암호화 저장소(Windows Credential Manager, macOS Keychain)에 저장합니다. Tauri 커맨드를 통해 키를 읽고 쓰는 방식으로 변경합니다.

**기대 효과:**
- API 키 탈취 위험 원천 차단
- 사용자 계정 보안 강화
- 보안 점수 76 → 90+ 예상

---

### 🟡 중요 (P2)

#### [P2-1] E2E 테스트 스위트 추가

| 항목 | 내용 |
|:---|:---|
| **ID** | `TEST-001` |
| **카테고리** | 🧪 테스트 |
| **복잡도** | High |
| **대상 파일** | `core/tests/e2e_test.rs` (신규), `core/tests/fixtures/` (신규) |

**현재 상태:** 186개 단위/통합 테스트가 있으나, 실제 파일 I/O부터 번역 API 모킹까지 전체 파이프라인을 검증하는 E2E 테스트가 없습니다.

**개선 내용:** `wiremock` 크레이트로 AI API를 모킹하고, 다양한 형식의 샘플 파일을 사용하여 전체 번역 파이프라인을 검증하는 E2E 테스트 스위트를 구축합니다.

**기대 효과:**
- 리팩토링 시 회귀 버그 방지
- 새 형식 추가 시 안정성 보장
- 테스트 커버리지 85 → 92+ 예상

---

#### [P2-2] UI 에러 피드백 상세화

| 항목 | 내용 |
|:---|:---|
| **ID** | `UI-001` |
| **카테고리** | 🎨 UI/UX |
| **복잡도** | Medium |
| **대상 파일** | `apps/desktop/src/context/ToastStore.tsx`, `apps/desktop/src/lib/ipc.ts` |

**현재 상태:** 에러 발생 시 일반적인 Toast 알림만 표시됩니다. 에러 유형(네트워크, API 한도, 파일 형식 등)에 따른 구체적인 안내가 없습니다.

**개선 내용:**
1. Rust 백엔드에서 구조화된 에러 타입 정의 (`AppError` enum)
2. 프론트엔드에서 에러 유형별 아이콘, 색상, 해결 방법 표시
3. API 한도 초과 시 남은 대기 시간 표시

**기대 효과:**
- 사용자 문제 해결 시간 단축
- 지원 문의 감소
- UI/UX 점수 75 → 82+ 예상
<!-- AUTO-IMPROVEMENT-LIST-END -->

---

## 3. ✨ 기능 추가 항목 (새 기능)

<!-- AUTO-FEATURE-LIST-START -->

### 🟡 중요 (P2)

#### [P2-3] 번역 제외(ignore) 기능

| 항목 | 내용 |
|:---|:---|
| **ID** | `FEAT-001` |
| **카테고리** | ✨ 기능 추가 |
| **복잡도** | Medium |
| **대상 파일** | `core/src/config.rs`, `core/src/scanner.rs`, `apps/desktop/src/views/SettingsView.tsx` |

**현재 상태:** 스캔된 모든 파일이 번역 대상이 됩니다. 개발자 노트, 테스트 파일, 특정 언어 폴더 등을 제외할 방법이 없습니다.

**개선 내용:**
1. `.modtranslatorignore` 파일 지원 (gitignore 형식)
2. `config.rs`에 `ignore_patterns: Vec<String>` 필드 추가
3. `scanner.rs`에서 패턴 매칭으로 파일 제외
4. 설정 UI에서 직접 패턴 편집 가능

**기대 효과:**
- 불필요한 번역 작업 감소 → API 비용 절감
- 사용자 제어권 향상
- 대규모 모드팩 처리 시 효율성 증가

---

### 🟢 선택적 (P3)

#### [P3-1] 다국어 UI 지원 (i18n)

| 항목 | 내용 |
|:---|:---|
| **ID** | `FEAT-002` |
| **카테고리** | ✨ 기능 추가 |
| **복잡도** | Medium |
| **대상 파일** | `apps/desktop/src/i18n/` (신규), `apps/desktop/src/App.tsx` |

**현재 상태:** UI 텍스트가 한국어로 하드코딩되어 있습니다. 글로벌 사용자 접근이 제한됩니다.

**개선 내용:**
1. `react-i18next` 라이브러리 도입
2. `i18n/locales/` 폴더에 언어별 JSON 파일 생성 (ko, en, ja, zh)
3. 언어 선택 드롭다운 추가
4. 브라우저 언어 자동 감지

**기대 효과:**
- 글로벌 사용자 접근성 향상
- 번역 프로젝트답게 다국어 지원
- 커뮤니티 번역 기여 가능
<!-- AUTO-FEATURE-LIST-END -->